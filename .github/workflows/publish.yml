name: Publish Library

on:
	push:
		tags:
			- 'v*'

jobs:
	build-and-publish:
		runs-on: ubuntu-latest

		steps:
			- uses: actions/checkout@v4

			- name: Set up JDK 17
			  uses: actions/setup-java@v4
			  with:
				  java-version: '17'
				  distribution: 'temurin'

			- name: Grant execute permission for gradlew
			  run: chmod +x gradlew

			- name: Build and Publish
			  run: ./gradlew publishReleasePublicationToGitHubRepository
			  env:
				  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
